{# Learn how to use Turbo Streams: https://github.com/symfony/ux-turbo#broadcast-doctrine-entities-update #}
{% block create %}
    <turbo-stream action="append" target="neox_dash_row_{{ entity.section.id }}-{{ entity.section.name }}">
        <template>
            <script>
                (function() {

                    const idElement = "live-NeoxDashBoardContent@{{ entity.section.class.id }}"
                    console.log(idElement)
                    if (idElement && idElement.includes('@')) {
                        // const id = idElement.split('@')[1];
                        const element = document.getElementById(idElement);
                        const component = element ? element.__component : null;

                        if (component) {
                            component.action('refresh', {'query': entity.section.class.id});
                        }
                    }
                })();
            </script>
        </template>
    </turbo-stream>



{% endblock %}

{% block update %}
    <turbo-stream action="update" method="morph" target="neox_dash_domain_{{ id }}">
        <template>
            {% set item             = entity %}
            {% set section          = item.section %}
            {% set NeoxDashClass    = section.class %}
            {% set height           = section.heigth|default('2.8') ~ 'rem' %}
            {{ include('@NeoxDashBoardBundle/_Partials/dashBoardContent/_TabsCardItem.html.twig') }}
        </template>
    </turbo-stream>
{% endblock %}

{% block remove %}
    <turbo-stream action="remove" target="neox_dash_domain_{{ id }}">

    </turbo-stream>
{% endblock %}
